以下是你整理的**冻结版本开发清单（Version: 1.3.6）**，已根据要求 **重新编号并合并补充新事项**：

---

# ✅ 待完成清单

**Version: 1.3.6**
本清单为当前冻结版本的开发状态记录，用于后续版本恢复与迭代参考。

---

## 1. 多副板线索一致性问题

### 问题描述：

* 当前在使用含副板的右线规则组合（如 `[2E' 2I']`）时出现主板线索数为 0 的异常情况；
* 而此类右线规则不应在没有左线时具备唯一解能力。

### 初步判断：

* 可能由于副板未正确构造或 `create_constraints()` 中未挂接主板变量；
* 副板变量未参与主解推理，导致逻辑缺陷；
* 染色/雷图变量、线索对象是否联动有待验证。

### 建议：

* 以 `[2E' 2I']` 为基准，构造最小复现测试；
* 使用调试模式观察副板变量、主板变量、线索构造；
* 加入副板约束日志打印；
* 每条规则在默认测试流程中加入副板验证。

---

## 2. 线索数搜索逻辑存在异常

### 问题描述：

* 执行 `generate_game()` 时频繁失败；
* 原因疑似为线索数表中含 0；
* 使用相同种子重试无法复现。

### 后续补充：

* 已定位为“失效函数”中默认 `return True` 所致；
* 失效函数逻辑应补充合理 return 条件；
* 仍需确认是否存在其他路径返回错误。

---

## 3. 所有规则结构迁移至根目录 `rule/`

### 操作内容：

* 将所有 `Lrule/`、`Rrule/`、`Mrule/` 内容统一移动至 `rule/`；
* 保持 `AbstractClueValue`、`AbstractClueRule`、`AbstractMinesRule` 继承结构不变；
* 所有实现应在 `rule/__init__.py` 中导入注册。

### 目标：

* 支持统一通过 `import rule` 导入；
* 简化用户扩展与自动扫描规则逻辑。

---

## 4. `get_rule()` 移步至 `rule/__init__.py`

* 统一规则入口，便于第三方调用；
* 配合 `get_all_rules()` 提供完整规则列表；
* 避免重复扫描注册类。

---

## 5. 文档提取机制重构（基于继承关系）

### 目标：

* 所有规则类文档提取应依据继承自哪个抽象类来自动分类：

  * `AbstractClueValue` → R规则
  * `AbstractMinesRule` → L规则
  * 其他抽象基类 → M规则或其它

### 实现方式建议：

* 利用 `__subclasses__()` 遍历；
* 对每个子类判断其继承路径；
* 自动构造文档块，无需手写列表。

---

## 6. 规则完整性验证与测试记录

### 操作：

* 对项目中 **所有规则（L/R/M）** 进行一次性测试；
* 每条规则记录以下内容：

  * 能否生成 `6x6` 谜题；
  * 是否存在明显性能瓶颈；
  * 随机生成的 3 道题是否具有唯一解（如确认无误可跳过）；
  * 生成总耗时记录（可粗略取平均值）。

### 输出建议：

* 写入 `docs/rule_eval.md` 或 `data/rule_stat.json`；
* 每条规则带编号、类别、时间、支持的题型标注。

---

## 7. 项目结构补全建议

当前结构完整度较高，建议补全以下模块以标准化维护流程：

```
├─ config/                  # 配置文件目录（如 yaml/json 配置）
│    └─ default.yaml
├─ docs/                    # 项目文档与设计说明
├─ scripts/                 # 环境搭建、批处理、备份脚本
├─ tests/                   # 单元测试模块
├─ .gitignore               # Git 忽略规则
├─ setup.py / pyproject.toml # 项目打包/分发（可选）
```

补足理由：

* 配置集中管理（避免硬编码）；
* 文档协同易维护；
* 后续 CI/CD 结构统一；
* 保持主逻辑代码简洁清晰。

---

## 附：规则现状确认

> **截至版本 1.3.6，所有规则已全部实现。**
以下为根据你提供的测试数据整理的 **规则测试汇总表**（Markdown 表格格式）。每条规则记录 6x6 题板下的平均生成时间、唯一性表现、问题备注。

---

###  规则测试汇总（14MV / 14MV2）

| 规则  | 平均用时 (s) | 唯一性    | 是否需重检 | 问题备注/说明    |
|-----|----------|--------|-------|------------|
| V   | \~0.90   | ✅ 全唯一  | 否     | —          |
| 1Q  | \~0.90   | ✅ 全唯一  | 否     | —          |
| 1C  | \~2.87   | ✅ 全唯一  | 否     | 存在性能瓶颈     |
| 1T  | <1.0     | ✅ 全唯一  | 否     | —          |
| 1O  | 10.77    | ❌ 多解   | ✅     | 使用连通性约束    |
| 1D  | \~0.81   | ✅ 早测唯一 | 否     | —          |
| 1S  | \~1.87   | ❌ 错误   | ✅     | 实现错误需修复    |
| 1B  | \~0.81   | ✅ 已验证  | 否     | —          |
| 1T' | \~1.19   | ✅ 暂信任  | 否     | 不熟，已提前测试   |
| 1D' | \~1.22   | ✅ 两次唯一 | 否     | 第三次未测      |
| 1A  | \~0.86   | ✅ 已验证  | 否     | 实现极简       |
| 1H  | \~0.83   | ✅ 已验证  | 否     | 实现极简       |
| 1U  | \~1.13   | ✅ 已验证  | 否     | 实现极简       |
| 1M  | \~0.90   | ✅ 全唯一  | 否     | —          |
| 1L  | \~1.10   | ✅ 全唯一  | 否     | —          |
| 1W  | \~0.97   | ✅ 全唯一  | 否     | —          |
| 1N  | \~0.90   | ✅ 全唯一  | 否     | —          |
| 1X  | \~0.89   | ✅ 全唯一  | 否     | —          |
| 1P  | \~1.08   | ✅ 群友确认 | ✅     | 不熟，归入重检    |
| 1E  | \~1.61   | ✅ 全唯一  | ✅     | 可进一步删格     |
| 1X' | \~0.90   | ✅ 全唯一  | 否     | —          |
| 1K  | \~0.97   | ✅ 全唯一  | 否     | 简单逻辑       |
| 1W' | \~2.35   | ✅ 全唯一  | 否     | 低成功率需开启R   |
| 1E' | \~1.18   | ✅ 存疑   | ✅     | 不会验证唯一性    |
| 2H  | \~0.83   | ✅ 全唯一  | 否     | 简单逻辑       |
| 2C  | \~3.29   | ✅ 全唯一  | 否     | 多次验证       |
| 2S  | \~0.76   | ❌ 多解   | ✅     | 题号 748504  |
| 2G  | \~93.25  | ❌ 多解   | ✅     | 性能极差需重写    |
| 2F  | \~0.82   | ✅ 全唯一  | 否     | —          |
| 2B  | \~0.90   | ❌ 多解   | ✅     | 题号 4016799 |
| 2T  | \~0.69   | ✅ 全唯一  | 否     | —          |
| 2Z  | \~0.73   | ✅ 全唯一  | 否     | 含染色变种      |
| 2G' | \~2.80   | ✅ 全唯一  | 否     | 第2次生成慢     |
| 2X  | \~0.89   | ✅ 全唯一  | 否     | —          |
| 2D  | \~0.99   | ✅ 全唯一  | 否     | 简单逻辑       |
| 2P  | \~0.90   | ✅ 全唯一  | ✅     | 早期未覆盖验证    |
| 2E  | \~1.25   | ✅ 全唯一  | 否     | 副板规则       |
| 2M  | \~1.04   | ✅ 全唯一  | 否     | —          |
| 2A  | ❌（变动极大）  | ❌ 性能问题 | ✅     | 值大时极慢      |
| 2L  | \~1.35   | ✅ 暂信任  | ✅     | 不会推理       |
| 2X' | \~2.13   | ✅ 全唯一  | 否     | 无R失败率高     |
| 2I  | \~1.69   | ✅ 全唯一  | 否     | 不会推理       |
| 2E' | \~1.53   | ✅ 全唯一  | 否     | 不会推理       |
| 2E^ | \~3.29   | ✅ 暂信任  | ✅     | 不会验证唯一性    |
| 2L' | \~1.27   | ✅ 暂信任  | ✅     | 实现照搬2L     |
